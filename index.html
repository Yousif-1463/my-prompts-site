<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mr ChatGPT — أداة استخراج الأوامر</title>

  <!-- خط -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#0f1226; --bg2:#1b1f3a; --bg3:#0a0c1a;
      --card:#121528ee; --muted:#aab0d6; --text:#e8ecff; --accent:#6ea8ff; --accent-2:#7cf0bd; --danger:#ff6b6b;
      --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;overflow-x:hidden;font-family:"Cairo",sans-serif;background:linear-gradient(160deg,var(--bg1),var(--bg2) 45%,var(--bg3));color:var(--text)}
    header{position:sticky;top:0;z-index:20;backdrop-filter:blur(10px);background:rgba(10,12,26,.7);border-bottom:1px solid rgba(255,255,255,.06)}
    .container{width:min(100%,1200px);margin:auto;padding:18px;display:flex;align-items:center;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .logo{width:44px;height:44px;border-radius:12px;display:grid;place-items:center;background:linear-gradient(180deg,rgba(110,168,255,.2),rgba(110,168,255,.08));border:1px solid rgba(110,168,255,.35);box-shadow:inset 0 0 12px rgba(255,255,255,.12),0 8px 22px rgba(62,106,214,.25)}
    /* أيقونة ∞ صحيحة */
    .logo svg{width:26px;height:26px;fill:none;stroke:var(--accent-2);stroke-width:2;stroke-linecap:round;stroke-linejoin:round}
    main{padding:40px 18px 80px}
    .hero{text-align:center;max-width:820px;margin:auto}
    .hero h1{font-size:2rem;margin:0 0 10px;font-weight:900}
    .hero p{color:var(--muted);margin:0 0 22px}
    .search{display:flex;gap:10px;align-items:center;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);border-radius:999px;padding:10px 12px;box-shadow:var(--shadow);max-width:640px;margin:14px auto 0;overflow:hidden}
    .search input{flex:1;background:transparent;border:none;outline:none;color:var(--text);padding:12px;font-size:1rem;min-width:0}
    .btn{padding:10px 16px;border-radius:999px;border:none;cursor:pointer;font-weight:700;color:white;background:linear-gradient(180deg,rgba(110,168,255,.4),rgba(110,168,255,.2));white-space:nowrap}
    .btn.secondary{background:linear-gradient(180deg,rgba(124,240,189,.4),rgba(124,240,189,.2))}
    .result-wrap{max-width:820px;margin:26px auto}
    .card{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .card-body{padding:16px}
    .prompt-text{background:#070914;border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:14px;overflow:auto;max-height:420px}
    .prompt-text pre{margin:0;white-space:pre-wrap;word-wrap:break-word}
    .copy-btn{cursor:pointer;padding:12px 16px;border-radius:14px;background:linear-gradient(180deg,rgba(124,240,189,.24),rgba(124,240,189,.12));border:1px solid rgba(124,240,189,.45);color:var(--text);font-weight:800;display:inline-flex;align-items:center;gap:10px}
    .muted{color:var(--muted)}
    footer{margin-top:60px;border-top:1px solid rgba(255,255,255,.08);background:rgba(10,12,26,.5);padding:20px;text-align:center}
    footer a{color:var(--accent-2);text-decoration:none}
    footer a:hover{text-decoration:underline}
    /* موبايل */
    @media (max-width:520px){
      .hero h1{font-size:1.6rem}
      .btn{padding:10px 14px}
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        <div class="logo" aria-hidden="true">
          <!-- Infinity ( ∞ ) -->
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M7 12c2.5-3.5 5-3.5 7.5 0M10 12c-2.5 3.5-5 3.5-7.5 0M14 12c2.5 3.5 5 3.5 7.5 0"/>
          </svg>
        </div>
        <span>Mr ChatGPT</span>
      </div>
    </div>
  </header>

  <main>
    <!-- البطل -->
    <section class="hero">
      <h1>استخرج الأمر بكتابة الكود</h1>
      <p>أوامر احترافية تساعدك في إنجاز مهامك وتوفير وقتك — واجهة عصرية، بسيطة، وسريعة الاستجابة.</p>

      <!-- البحث -->
      <div class="search">
        <input id="codeInput" placeholder="(أكتب الكود) مثال: MY1">
        <button class="btn" id="searchBtn">بحث</button>
        <button class="btn secondary" id="clearBtn">مسح</button>
      </div>
    </section>

    <!-- النتيجة -->
    <section class="result-wrap">
      <div id="empty" class="card"><div class="card-body" style="text-align:center"><span class="muted">✨ اكتب الكود ثم اضغط «بحث» لعرض الأمر.</span></div></div>

      <div id="resultCard" class="card" style="display:none">
        <div class="card-body">
          <div class="prompt-text" id="resText"><pre>—</pre></div>
          <div style="text-align:right;margin-top:10px;">
            <button class="copy-btn" id="copyBtn">نسخ الأمر</button>
          </div>
        </div>
      </div>

      <div id="notFound" class="card" style="display:none">
        <div class="card-body" style="border-right:4px solid var(--danger)">
          لم نجد هذا الكود.
        </div>
      </div>
    </section>

    <!-- طريقة الاستخدام (من JSON) -->
    <section class="result-wrap">
      <div class="card">
        <div class="card-body">
          <h3 style="margin:0 0 10px;font-weight:900">طريقة استخدام الـ PROMPT</h3>
          <div id="howtoBody" class="muted">سيتم جلب طريقة الاستخدام من ملف JSON…</div>
        </div>
      </div>
    </section>
  </main>

  <!-- سكربت (منفصل عن الفوتر) -->
  <script>
    // قاعدة البيانات من JSON
    let DB = null;

    // تحميل الـ JSON مع منع الكاش
    async function loadDB(){
      try{
        const res = await fetch('prompts.json?v=' + Date.now());
        DB = await res.json();

        // طريقة الاستخدام
        const howto = (DB.static_text && DB.static_text.usage_guide) ? DB.static_text.usage_guide : '';
        document.getElementById('howtoBody').textContent = howto || '—';
      }catch(err){
        console.error('JSON load error:', err);
        document.getElementById('howtoBody').textContent = 'تعذّر تحميل البيانات. حدّث الصفحة.';
      }
    }

    // بحث
    function doSearch(){
      const input = document.getElementById('codeInput');
      const code = (input.value || '').trim().toUpperCase();
      if(!code){ return; }
      if(!DB || !Array.isArray(DB.prompts)){ 
        alert('البيانات غير جاهزة بعد. جرّب تحديث الصفحة.'); 
        return; 
      }
      const found = DB.prompts.find(p => (p.code||'').toUpperCase() === code);
      if(found && (found.text||'').trim()){
        document.getElementById('empty').style.display='none';
        document.getElementById('notFound').style.display='none';
        document.getElementById('resultCard').style.display='block';
        document.getElementById('resText').innerHTML = '<pre>'+ (found.text||'') +'</pre>';
      }else{
        document.getElementById('resultCard').style.display='none';
        document.getElementById('empty').style.display='none';
        document.getElementById('notFound').style.display='block';
      }
    }

    // نسخ
    function doCopy(){
      const txt = document.getElementById('resText').innerText || '';
      if(!txt.trim()) return;
      navigator.clipboard.writeText(txt).then(()=>{
        const btn = document.getElementById('copyBtn');
        const old = btn.textContent;
        btn.textContent = 'تم النسخ ✔';
        setTimeout(()=>{ btn.textContent = old; }, 1500);
      });
    }

    // مسح
    function doClear(){
      document.getElementById('codeInput').value='';
      document.getElementById('resultCard').style.display='none';
      document.getElementById('notFound').style.display='none';
      document.getElementById('empty').style.display='block';
      document.getElementById('resText').innerHTML='<pre>—</pre>';
    }

    // أحداث
    document.addEventListener('DOMContentLoaded', ()=>{
      loadDB();

      document.getElementById('searchBtn').addEventListener('click', doSearch);
      document.getElementById('copyBtn').addEventListener('click', doCopy);
      document.getElementById('clearBtn').addEventListener('click', doClear);
      // Enter = بحث
      document.getElementById('codeInput').addEventListener('keydown', (e)=>{
        if(e.key === 'Enter'){ doSearch(); }
      });
    });
  </script>

  <!-- فوتر بروابط لصفحات مستقلة -->
  <footer>
    <p>
      <a href="contact.html">تواصل معنا</a> |
      <a href="about.html">من نحن</a> |
      <a href="privacy.html">سياسة الخصوصية</a>
    </p>
  </footer>
</body>
</html>
